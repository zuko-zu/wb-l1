<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Document</title>
  </head>
  <body>
    <script>
      function getCallStackSize() {
        let i = 0;

        const func = () => {
          i++;
          func();
        };

        try {
          func();
        } catch (e) {
          // Словили ошибку переполнения стэка и вывели значение счетчика в консоль
          return i;
        }
      }
      console.log(getCallStackSize());

      // Важно понимать, что глубина колл стека может меняться в зависимости от сложности функции.
      // Так, если функцию func() изменить следующим образом, размер колл стека станет меньше (если мы его измеряем в количестве вызовов)
      // const func = () => {
      // // Добавляем переменные
      //   let a = i + 1;
      //   let b = a + 1;
      //   i++;
      //   func();
      // };

      // Отсюда вывод, что количество рекурсивных вызовов функции до переполнения стэка зависит от самих функций.
      // Чем "тяжелее" функция, тем меньше раз она может быть вызвана рекурсивно.
      // Отсюда следует еще 1 вывод, что размер коллстека определяется в байтах.

      // Мы могил бы вычислить сколько весит функция и умножить это значение на количество вызовов и таким образом
      // получить размер коллстека в байтах, но не думаю что есть практическое применение этому методу.
      // Обычно размер коллстека измеряется в количестве вызовов функий до переполнения
    </script>
  </body>
</html>
